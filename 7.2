#include<stdio.h>
int main(){
    int n,m;
    int i,j,k;
    scanf("%d %d",&n,&m);
    int arr[m][4];
    for(i=0;i<m;i++){
        scanf("%d %d %d",&arr[i][0],&arr[i][1],&arr[i][2]);
        arr[i][3]=0;
    }
    for (i = 0; i < m - 1; i++) {
        for (j = i + 1; j < m; j++) {
            if (arr[i][2] > arr[j][2]) {
                // poori row swap karna hai
                for (k = 0; k < 4; k++) {
                    int temp = arr[i][k];
                    arr[i][k] = arr[j][k];
                    arr[j][k] = temp;
                }
            }
        }
    }
    int a[n];
    for(i=0;i<n;i++){
        a[i]=0;
    }
    for(i=0;i<m;i++){
        if(a[arr[i][0]]==0){
            a[arr[i][0]]=1;
            a[arr[i][1]]=1;
            arr[i][3]=1;
        }
        else if(a[arr[i][1]]==0){
             a[arr[i][0]]=1;
            a[arr[i][1]]=1;
            arr[i][3]=1;
        }
    }
    for (i = 0; i < m; i++) {
    if (arr[i][3] == 1) {  // agar 4th column ka value 1 hai
        printf("%d %d %d %d\n", arr[i][0], arr[i][1], arr[i][2], arr[i][3]);
    }
}
}
